<script>
// ===============================
// PRODUCTS – MULTI IMAGE + INFO
// ===============================
const PRODUCTS = [

  {
    id: "cnc-bracket-01",
    name: "CNC Aluminum Bracket",
    price: 120,
    available: true,
    desc: "Precision CNC machined aluminum bracket.",
    details: [
      "Material: Aluminum 6061",
      "Process: CNC Machining",
      "Tolerance: ±0.005 in",
      "Finish: As-machined"
    ],
    imgs: [
      "https://tusitio.com/bracket-1.jpg",
      "https://tusitio.com/bracket-2.jpg",
      "https://tusitio.com/bracket-3.jpg"
    ]
  },

  {
    id: "cnc-adapter-02",
    name: "CNC Machined Adapter",
    price: 95,
    available: false,   // ⛔ APAGADO
    desc: "Custom CNC machined adapter.",
    details: [
      "Material: Aluminum",
      "Process: CNC Machining"
    ],
    imgs: [
      "https://tusitio.com/adapter-1.jpg",
      "https://tusitio.com/adapter-2.jpg"
    ]
  },

  {
    id: "3d-jig-01",
    name: "3D Printed Assembly Jig",
    price: 45,
    available: true,
    desc: "Functional 3D printed jig for assembly.",
    details: [
      "Material: PETG",
      "Process: FDM 3D Printing",
      "Layer height: 0.28 mm"
    ],
    imgs: [
      "https://tusitio.com/jig-1.jpg",
      "https://tusitio.com/jig-2.jpg",
      "https://tusitio.com/jig-3.jpg"
    ]
  }

];

// ===============================
// CART LOGIC
// ===============================
const cart = [];
const count = document.getElementById("count");
const list = document.getElementById("list");
const drawer = document.getElementById("drawer");
const grid = document.getElementById("products");

document.getElementById("cartBtn").onclick = () => {
  drawer.classList.toggle("open");
};

// ===============================
// RENDER PRODUCTS
// ===============================
function renderProducts(){
  grid.innerHTML = PRODUCTS.map(p => `
    <div class="card">
      <div class="content">

        <img id="img-${p.id}" class="product-img" src="${p.imgs[0]}">

        <div class="thumbs">
          ${p.imgs.map(img => `
            <img src="${img}" onclick="changeImg('${p.id}','${img}')">
          `).join("")}
        </div>

        <h3>${p.name}</h3>
        <p class="meta">${p.desc}</p>

        <ul class="meta">
          ${p.details.map(d => `<li>${d}</li>`).join("")}
        </ul>

        <p><strong>$${p.price}</strong></p>

        ${
          p.available
          ? `<button class="btn btn-add" onclick="add('${p.id}')">Add to Cart</button>`
          : `<button class="btn btn-add" disabled style="opacity:.5;cursor:not-allowed">
               Sold Out
             </button>`
        }

      </div>
    </div>
  `).join("");
}

// ===============================
// IMAGE SWITCH
// ===============================
function changeImg(id, img){
  document.getElementById(`img-${id}`).src = img;
}

// ===============================
// CART FUNCTIONS
// ===============================
function add(id){
  const product = PRODUCTS.find(p => p.id === id);
  if(!product || !product.available) return;
  cart.push(product);
  count.textContent = cart.length;
  renderCart();
}

function renderCart(){
  let total = 0;
  list.innerHTML = "";
  cart.forEach(p=>{
    total += p.price;
    list.innerHTML += `
      <div class="cart-item">
        <strong>${p.name}</strong><br>
        $${p.price}
      </div>`;
  });
  list.innerHTML += `<hr><strong>Total: $${total}</strong>`;
}

renderProducts();
</script>


